@tailwind base;
@tailwind components;
@tailwind utilities;

/* Prose styles for rendered markdown */
.prose h1 { font-size: 2em; font-weight: 700; margin-bottom: 0.5em; margin-top: 0; }
.prose h2 { font-size: 1.5em; font-weight: 600; margin-bottom: 0.5em; margin-top: 1.5em; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.3em; }
.prose h3 { font-size: 1.25em; font-weight: 600; margin-bottom: 0.5em; margin-top: 1.25em; }
.prose p { margin-bottom: 1em; line-height: 1.75; }
.prose a { color: #2563eb; text-decoration: underline; }
.prose a:hover { color: #1d4ed8; }
.prose code { background-color: #f3f4f6; padding: 0.125em 0.25em; border-radius: 0.25em; font-size: 0.875em; }
.prose pre { background-color: #1f2937; color: #f9fafb; padding: 1em; border-radius: 0.5em; overflow-x: auto; margin-bottom: 1em; }
.prose pre code { background-color: transparent; padding: 0; }
.prose pre.mermaid { background-color: transparent; color: inherit; text-align: center; padding: 1em 0; overflow-x: auto; position: relative; }
.prose pre.mermaid svg { font-family: ui-sans-serif, system-ui, sans-serif; max-width: 100%; }

/* Mermaid diagram expand button */
.mermaid-expand-btn {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.5rem;
  background-color: rgba(255, 255, 255, 0.9);
  border: 1px solid #d1d5db;
  border-radius: 0.375rem;
  color: #6b7280;
  font-size: 0.75rem;
  font-family: ui-sans-serif, system-ui, sans-serif;
  cursor: pointer;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.15s ease, color 0.15s ease, background-color 0.15s ease, border-color 0.15s ease;
  z-index: 10;
  line-height: 1;
}
.prose pre.mermaid:hover .mermaid-expand-btn { opacity: 1; pointer-events: auto; }
.mermaid-expand-btn:hover,
.mermaid-expand-btn:focus,
.mermaid-expand-btn:focus-visible { opacity: 1; pointer-events: auto; color: #2563eb; border-color: #93c5fd; background-color: #eff6ff; outline-offset: 2px; }
@media (hover: none) {
  .mermaid-expand-btn { opacity: 1; pointer-events: auto; }
}

/* Mermaid fullscreen modal */
#mermaid-modal {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 1000;
  background-color: #f9fafb;
}
#mermaid-modal.is-open { display: flex; flex-direction: column; }

#mermaid-modal-header {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 0.75rem 1rem;
  flex-shrink: 0;
  background-color: #ffffff;
  border-bottom: 1px solid #e5e7eb;
}
#mermaid-modal-close {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 2rem;
  height: 2rem;
  background-color: #ffffff;
  border: 1px solid #d1d5db;
  border-radius: 0.375rem;
  color: #374151;
  cursor: pointer;
  transition: background-color 0.15s ease, color 0.15s ease, border-color 0.15s ease;
}
#mermaid-modal-close:hover { background-color: #eff6ff; border-color: #93c5fd; color: #2563eb; }

#mermaid-modal-viewport {
  flex: 1;
  overflow: hidden;
  cursor: grab;
  user-select: none;
  -webkit-user-select: none;
  position: relative;
  background-color: #f9fafb;
}
#mermaid-modal-viewport.is-panning { cursor: grabbing; }

#mermaid-modal-canvas {
  position: absolute;
  top: 0;
  left: 0;
  transform-origin: 0 0;
  will-change: transform;
}
#mermaid-modal-canvas svg {
  display: block;
  max-width: none;
}

#mermaid-modal-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  flex-shrink: 0;
  background-color: #ffffff;
  border-top: 1px solid #e5e7eb;
}
.mermaid-ctrl-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 2rem;
  height: 2rem;
  background-color: #ffffff;
  border: 1px solid #d1d5db;
  border-radius: 0.375rem;
  color: #374151;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 600;
  line-height: 1;
  transition: background-color 0.15s ease, color 0.15s ease, border-color 0.15s ease;
}
.mermaid-ctrl-btn:hover { background-color: #eff6ff; border-color: #93c5fd; color: #2563eb; }
#mermaid-zoom-level {
  min-width: 3.5rem;
  text-align: center;
  color: #6b7280;
  font-size: 0.75rem;
  font-family: ui-monospace, monospace;
}
.prose ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; }
.prose ol { list-style-type: decimal; padding-left: 1.5em; margin-bottom: 1em; }
.prose li { margin-bottom: 0.25em; }
.prose blockquote { border-left: 4px solid #e5e7eb; padding-left: 1em; color: #6b7280; margin-bottom: 1em; }
.prose table { width: 100%; border-collapse: collapse; margin-bottom: 1em; }
.prose th, .prose td { border: 1px solid #e5e7eb; padding: 0.5em 0.75em; text-align: left; }
.prose th { background-color: #f9fafb; font-weight: 600; }
.prose del { text-decoration: line-through; color: #6b7280; }
.prose img { max-width: 100%; border-radius: 0.5em; }
.prose hr { border-top: 1px solid #e5e7eb; margin: 2em 0; }

/* Smooth scrolling for anchor navigation (respects reduced-motion preference) */
@media (prefers-reduced-motion: no-preference) {
  html { scroll-behavior: smooth; }
}

/* TOC scroll spy active state */
.toc-link.toc-active { color: #1d4ed8; border-left-color: #2563eb; }

/* Heading anchor copy-link icon */
.prose .heading-anchor {
  display: inline-flex;
  align-items: center;
  margin-left: 0.4em;
  color: #9ca3af;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.15s ease, color 0.15s ease;
  text-decoration: none;
  vertical-align: middle;
}
.prose h1:hover .heading-anchor,
.prose h2:hover .heading-anchor,
.prose h3:hover .heading-anchor { opacity: 1; pointer-events: auto; }
.prose .heading-anchor:hover,
.prose .heading-anchor:focus,
.prose .heading-anchor:focus-visible { color: #2563eb; opacity: 1; pointer-events: auto; }
.prose .heading-anchor.copied { color: #16a34a; opacity: 1; pointer-events: auto; }
@media (hover: none) {
  .prose .heading-anchor { opacity: 1; pointer-events: auto; }
}

/* ========================================================================
   Scalar API Reference — match Omnidex design language
   Scalar uses CSS custom properties for theming. We override them to align
   with the gray/blue palette used across the rest of the portal.
   ======================================================================== */

/* --- Color palette (light mode only — Omnidex has no dark mode) --- */
#scalar-api-reference .light-mode {
  /* Text colors */
  --scalar-color-1: #111827;           /* gray-900  — headings, primary text */
  --scalar-color-2: rgba(55, 65, 81, 0.9); /* gray-700  — body text */
  --scalar-color-3: rgba(107, 114, 128, 0.8); /* gray-500  — muted / tertiary */
  --scalar-color-accent: #2563eb;      /* blue-600  — links, accents */

  /* Backgrounds */
  --scalar-background-1: #ffffff;      /* white     — primary surface */
  --scalar-background-2: #f9fafb;      /* gray-50   — secondary surface */
  --scalar-background-3: #f3f4f6;      /* gray-100  — tertiary surface */
  --scalar-background-accent: rgba(37, 99, 235, 0.06); /* blue-600 at 6% */

  /* Borders */
  --scalar-border-color: #e5e7eb;      /* gray-200 */

  /* Buttons */
  --scalar-button-1: #2563eb;          /* blue-600  — primary button */
  --scalar-button-1-hover: #1d4ed8;    /* blue-700  — primary button hover */
  --scalar-button-1-color: #ffffff;

  /* Shadows */
  --scalar-shadow-1: 0 1px 3px 0 rgba(0, 0, 0, 0.06);
  --scalar-shadow-2: 0 1px 3px 0 rgba(0, 0, 0, 0.06), 0 0 0 1px #e5e7eb;
}

/* --- Typography — use Omnidex system font stack --- */
#scalar-api-reference {
  --scalar-font:
    ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --scalar-font-code:
    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    "Liberation Mono", "Courier New", monospace;

  /* Border radii — match Omnidex rounded-lg */
  --scalar-radius: 0.375rem;
  --scalar-radius-lg: 0.5rem;
  --scalar-radius-xl: 0.75rem;

  --scalar-border-width: 1px;
}

/* --- Sidebar overrides (hidden, but set for safety) --- */
#scalar-api-reference .light-mode .sidebar {
  --scalar-sidebar-background-1: #ffffff;
  --scalar-sidebar-border-color: #e5e7eb;
  --scalar-sidebar-color-1: #111827;
  --scalar-sidebar-color-2: #374151;
  --scalar-sidebar-color-active: #2563eb;
  --scalar-sidebar-item-hover-background: #f3f4f6;
  --scalar-sidebar-item-hover-color: #111827;
  --scalar-sidebar-item-active-background: #eff6ff;
  --scalar-sidebar-search-background: #f9fafb;
  --scalar-sidebar-search-border-color: #d1d5db;
  --scalar-sidebar-search-color: #6b7280;
}

/* --- Contain Scalar within its parent card --- */
#scalar-api-reference {
  max-width: 100%;
  overflow: auto;
}
